<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<room>
  <caption></caption>
  <width>1280</width>
  <height>720</height>
  <vsnap>32</vsnap>
  <hsnap>32</hsnap>
  <isometric>0</isometric>
  <speed>120</speed>
  <persistent>0</persistent>
  <colour>0</colour>
  <showcolour>-1</showcolour>
  <code>number_of_planets = (global.level div 9) + 1;

/*
We want to center the action in the window. 
To this end, we need to get the average position of all the planets, 
then calculate an offset from this position and the center of the room, 
then shift the position of all the planets by this offset.
*/
var i = 0,
    planet_cluster_center_x = 0,
    planet_cluster_center_y = 0,
    offset_x,
    offset_y;

repeat (number_of_planets)
{
    global.planet[i] = instance_create(irandom_range(0, room_width), irandom_range(0, room_height), oPlanet);

    with global.planet[i]
    {
        x = clamp(x, radius + 100, room_width  - radius - 100);
        y = clamp(y, radius + 100, room_height - radius - 100);
    }

    planet_cluster_center_x += global.planet[i].x;
    planet_cluster_center_y += global.planet[i].y;

    i++;
}

planet_cluster_center_x /= instance_number(oPlanet);
planet_cluster_center_y /= instance_number(oPlanet);

offset_x = planet_cluster_center_x - (room_width  * 0.5);
offset_y = planet_cluster_center_y - (room_height * 0.5);

i = 0;
repeat instance_number(oPlanet)
{
    global.planet[i].x -= offset_x;
    global.planet[i].y -= offset_y;
    
    i++;
}

base_planet = global.planet[irandom(instance_number(oPlanet) - 1)];
with base_planet
{
    player = instance_create(x + radius, y + radius, oPlayerTurret);
}

//Set up level timer
global.dashboard.level_timer[global.level]  =  max(5, 16 - global.level) * room_speed;
global.dashboard.level_timer[global.level] += (3 * room_speed * instance_number(oTarget_parent));

//Add 30 seconds to bonus timer for each planet &gt;1
global.dashboard.level_timer[global.level] += (30 * room_speed * (instance_number(oPlanet) - 1));

if (global.level == 24)
{
    room_goto(rmEnd);
}

//instance_create(10, 640, oLevel_data_manager);</code>
  <enableViews>-1</enableViews>
  <clearViewBackground>-1</clearViewBackground>
  <clearDisplayBuffer>-1</clearDisplayBuffer>
  <makerSettings>
    <isSet>-1</isSet>
    <w>1071</w>
    <h>1104</h>
    <showGrid>-1</showGrid>
    <showObjects>-1</showObjects>
    <showTiles>-1</showTiles>
    <showBackgrounds>-1</showBackgrounds>
    <showForegrounds>-1</showForegrounds>
    <showViews>0</showViews>
    <deleteUnderlyingObj>0</deleteUnderlyingObj>
    <deleteUnderlyingTiles>-1</deleteUnderlyingTiles>
    <page>1</page>
    <xoffset>1</xoffset>
    <yoffset>-117</yoffset>
  </makerSettings>
  <backgrounds>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
  </backgrounds>
  <views>
    <view visible="-1" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1280" hview="720" xport="0" yport="0" wport="1280" hport="720" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="&lt;undefined&gt;" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
  </views>
  <instances/>
  <tiles/>
  <PhysicsWorld>0</PhysicsWorld>
  <PhysicsWorldTop>0</PhysicsWorldTop>
  <PhysicsWorldLeft>0</PhysicsWorldLeft>
  <PhysicsWorldRight>1024</PhysicsWorldRight>
  <PhysicsWorldBottom>768</PhysicsWorldBottom>
  <PhysicsWorldGravityX>0</PhysicsWorldGravityX>
  <PhysicsWorldGravityY>10</PhysicsWorldGravityY>
  <PhysicsWorldPixToMeters>0.100000001490116</PhysicsWorldPixToMeters>
</room>
